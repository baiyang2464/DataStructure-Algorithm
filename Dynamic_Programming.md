### åŠ¨æ€è§„åˆ’æ¦‚å¿µ

åŠ¨æ€è§„åˆ’çš„æ€æƒ³äº†ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰æ˜¯ä¸€ç§åˆ†é˜¶æ®µæ±‚è§£å†³ç­–é—®é¢˜çš„æ•°å­¦æ€æƒ³ã€‚æ€»ç»“èµ·æ¥å°±æ˜¯ä¸€å¥è¯ï¼Œå¤§äº‹åŒ–å°ï¼Œå°äº‹åŒ–äº†ã€‚

+ å¸¸è§çš„åŠ¨æ€è§„åˆ’é—®é¢˜

çº¿æ€§åŠ¨è§„ï¼šæ‹¦æˆªå¯¼å¼¹ï¼Œåˆå”±é˜Ÿå½¢ï¼ŒæŒ–åœ°é›·ï¼Œå»ºå­¦æ ¡ï¼Œå‰‘å®¢å†³æ–—ç­‰ï¼›

åŒºåŸŸåŠ¨è§„ï¼šçŸ³å­åˆå¹¶ï¼Œ åŠ åˆ†äºŒå‰æ ‘ï¼Œç»Ÿè®¡å•è¯ä¸ªæ•°ï¼Œç‚®å…µå¸ƒé˜µç­‰ï¼›

æ ‘å½¢åŠ¨è§„ï¼šè´ªåƒçš„ä¹å¤´é¾™ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ ‘ï¼Œèšä¼šçš„æ¬¢ä¹ï¼Œæ•°å­—ä¸‰è§’å½¢ç­‰ï¼›

èƒŒåŒ…é—®é¢˜ï¼š01èƒŒåŒ…é—®é¢˜ï¼Œå®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œåˆ†ç»„èƒŒåŒ…é—®é¢˜ï¼ŒäºŒç»´èƒŒåŒ…ï¼Œ

### 0-1èƒŒåŒ…é—®é¢˜

æœ‰Nä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºVçš„èƒŒåŒ…ã€‚ç¬¬iä»¶ç‰©å“çš„ä»·æ ¼ï¼ˆå³ä½“ç§¯ï¼Œä¸‹åŒï¼‰æ˜¯w[i]ï¼Œä»·å€¼æ˜¯c[i]ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è´¹ç”¨æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

è¿™æ˜¯æœ€åŸºç¡€çš„èƒŒåŒ…é—®é¢˜ï¼Œæ€»çš„æ¥è¯´å°±æ˜¯ï¼šé€‰è¿˜æ˜¯ä¸é€‰ï¼Œè¿™æ˜¯ä¸ªé—®é¢˜

ç›¸å½“äºç”¨`f[i][j]`â€‹è¡¨ç¤ºè€ƒè™‘å‰â€‹`iâ€‹`ä¸ªç‰©å“è£…å…¥å®¹é‡ä¸º`j`çš„èƒŒåŒ…ä¸­æ‰€å¯ä»¥è·å¾—çš„æœ€å¤§ä»·å€¼ã€‚

å¯¹äºä¸€ä¸ªç‰©å“ï¼Œåªæœ‰ä¸¤ç§æƒ…å†µ

ã€€ã€€æƒ…å†µä¸€: ç¬¬iä»¶ä¸æ”¾è¿›å»ï¼Œè¿™æ—¶æ‰€å¾—ä»·å€¼ä¸º:`f[i-1][j]`

ã€€ã€€æƒ…å†µäºŒ: ç¬¬iä»¶æ”¾è¿›å»ï¼Œè¿™æ—¶æ‰€å¾—ä»·å€¼ä¸ºï¼š`f[i-1][j-c[i]]+w[i] `

çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š

![](./pictures/mylatex20190624_145740.png)

```c
#include<stdio.h>
#include<algorithm>
using namespace std;
int f[1001][1001];
int main()
{
    int m, n,c[10001], w[10001];
     scanf("%d%d", &m, &n);					//mæ˜¯ç‰©å“ç§ç±»ï¼Œnæ˜¯èƒŒåŒ…èƒ½æ‰¿è½½çš„é‡é‡
     for(int i = 1; i <= m; i++)
       scanf("%d%d", &w[i], &c[i]);
     for(int i = 1; i <= m; i++)
     {
         for(int j = 0; j <= n; j++)
         {
             f[i][j] = f[i-1][j];
             if(j>=w[i])
           	 	f[i][j] = max(f[i][j], f[i-1][j-w[i]]+c[i]);
         }
     }
     printf("%d", f[m][n]);
     return 0;  
}
```

è¿˜å¯ä»¥è¿›è¡Œç©ºé—´ä¼˜åŒ–

è®¾ `f[v]`è¡¨ç¤ºèƒŒåŒ…è¿˜å¯ä»¥æ”¾å…¥`v`å…¬æ–¤ç‰©å“æ—¶å€™èƒ½å¾—åˆ°çš„æœ€å¤§ä»·å€¼ï¼ˆè‹¥èƒŒåŒ…æœ€å¤§èƒ½æ‰¿å—`n`é‡é‡ï¼Œ`f(n)`è¡¨ç¤ºæœªæ”¾å…¥ä»»ä½•ç‰©å“æ—¶å€™çš„ä»·å€¼ï¼‰ï¼Œ åˆ™çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š`f[v]=max(f[v]ï¼Œf[v-w[i]]+c[i]) `ï¼Œå½“v>=w[i]ï¼Œ1<=i<=n ã€‚

```c
#include<stdio.h>
#include<algorithm>
using namespace std;
const int maxm = 2001, maxn = 101;
int m, n;
int w[maxn], c[maxn];
int f[maxm]; 
int main()
{
    scanf("%d%d",&m, &n);            		//èƒŒåŒ…å®¹é‡må’Œç‰©å“æ•°é‡n
    for (int i=1; i <= n; i++)
        scanf("%d%d",&w[i],&c[i]);     		//æ¯ä¸ªç‰©å“çš„é‡é‡å’Œä»·å€¼
    for (int i=1; i <= n; i++)            	//è®¾f(v)è¡¨ç¤ºé‡é‡ä¸è¶…è¿‡vå…¬æ–¤çš„æœ€å¤§ä»·å€¼
        for (int v = m; v >= w[i]; v--)  	//æ³¨æ„æ˜¯é€†åº
            f[v] = max(f[v-w[i]]+c[i], f[v]);
    printf("%d\n",f[m]);                    // f(m)ä¸ºæœ€ä¼˜è§£
    return 0;
}
```



### å®Œå…¨èƒŒåŒ…é—®é¢˜

æœ‰Nç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºVçš„èƒŒåŒ…ï¼Œæ¯ç§ç‰©å“éƒ½æœ‰æ— é™ä»¶å¯ç”¨ã€‚ç¬¬iç§ç‰©å“çš„è´¹ç”¨æ˜¯w[i]ï¼Œä»·å€¼æ˜¯c[i]ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è´¹ç”¨æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

å®Œå…¨èƒŒåŒ…å’Œ01èƒŒåŒ…ååˆ†ç›¸åƒï¼Œ åŒºåˆ«å°±æ˜¯å®Œå…¨èƒŒåŒ…ç‰©å“æœ‰æ— é™ä»¶ã€‚ç”±ä¹‹å‰çš„é€‰æˆ–è€…ä¸é€‰è½¬å˜æˆäº†é€‰æˆ–è€…ä¸é€‰ï¼Œé€‰å‡ ä»¶ã€‚

å’Œ0-1èƒŒåŒ…ä¸€æ ·ï¼Œæœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

![](./pictures/mylatex20190624_152228.png)

```cpp
#include<stdio.h>
#include<algorithm>
using namespace std;
const int maxm=2001,maxn=101;
int n,m,v,i;
int c[maxn],w[maxn];
int f[maxm];
int main()
{
    scanf("%d%d",&m,&n);           		 //èƒŒåŒ…å®¹é‡må’Œç‰©å“æ•°é‡n
    for(i=1;i<=n;i++) 
        scanf("%d%d",&w[i],&c[i]);
    for(i=1;i<=n;i++)
        for(v=w[i]; v<=m; v++)          //è®¾ f[v]è¡¨ç¤ºé‡é‡ä¸è¶…è¿‡vå…¬æ–¤çš„æœ€å¤§ä»·å€¼
                                        //è¿™é‡Œæ˜¯v++ é¡ºåº åŒºåˆ«äº01èƒŒåŒ… 
            f[v]=max(f[v-w[i]]+c[i], f[v]);
    printf("%d\n", f[m]);           	// f[m]ä¸ºæœ€ä¼˜è§£
    return 0;
}
```



### å¤šé‡èƒŒåŒ…é—®é¢˜

æœ‰Nç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºVçš„èƒŒåŒ…ã€‚ç¬¬iç§ç‰©å“æœ€å¤šæœ‰`n[i]`ä»¶å¯ç”¨ï¼Œæ¯ä»¶è´¹ç”¨æ˜¯`w[i]`ï¼Œä»·å€¼æ˜¯`c[i]`ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è´¹ç”¨æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

è¿™é‡Œåˆå¤šäº†ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼Œæ¯ä¸ªç‰©å“è§„å®šäº†å¯ç”¨çš„æ¬¡æ•°ã€‚

åŒç†ï¼Œå¯ä»¥å¾—å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

![](./pictures/mylatex20190624_152655.png)

ä¸€é“ä¾‹é¢˜

ã€é—®é¢˜æè¿°ã€‘

ä¸ºäº†åº†è´ºç­çº§åœ¨æ ¡è¿åŠ¨ä¼šä¸Šå–å¾—å…¨æ ¡ç¬¬ä¸€åæˆç»©ï¼Œç­ä¸»ä»»å†³å®šå¼€ä¸€åœºåº†åŠŸä¼šï¼Œä¸ºæ­¤æ‹¨æ¬¾è´­ä¹°å¥–å“çŠ’åŠ³è¿åŠ¨å‘˜ã€‚æœŸæœ›æ‹¨æ¬¾é‡‘é¢èƒ½è´­ä¹°æœ€å¤§ä»·å€¼çš„å¥–å“ï¼Œå¯ä»¥è¡¥å……ä»–ä»¬çš„ç²¾åŠ›å’Œä½“åŠ›ã€‚

ã€è¾“å…¥æ ¼å¼ã€‘

ç¬¬ä¸€è¡ŒäºŒä¸ªæ•°n(n<=500)ï¼Œm(m<=6000)ï¼Œå…¶ä¸­nä»£è¡¨å¸Œæœ›è´­ä¹°çš„å¥–å“çš„ç§æ•°ï¼Œmè¡¨ç¤ºæ‹¨æ¬¾é‡‘é¢ã€‚ æ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•°ï¼Œvã€wã€sï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬Iç§å¥–å“çš„ä»·æ ¼ã€ä»·å€¼ï¼ˆä»·æ ¼ä¸ä»·å€¼æ˜¯ä¸åŒçš„æ¦‚å¿µï¼‰å’Œè´­ä¹°çš„æ•°é‡ï¼ˆä¹°0ä»¶åˆ°sä»¶å‡å¯ï¼‰ï¼Œå…¶ä¸­v<=100ï¼Œw<=1000ï¼Œs<=10ã€‚

ã€è¾“å‡ºæ ¼å¼ã€‘

ç¬¬ä¸€è¡Œï¼šä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæ­¤æ¬¡è´­ä¹°èƒ½è·å¾—çš„æœ€å¤§çš„ä»·å€¼ï¼ˆæ³¨æ„ï¼ä¸æ˜¯ä»·æ ¼ï¼‰ã€‚

ã€è¾“å…¥æ ·ä¾‹ã€‘

5 1000

80 20 4

40 50 9

30 50 7

40 30 6

20 20 1

ã€è¾“å‡ºæ ·ä¾‹ã€‘

1040

```c
#include<stdio.h>
#include<algorithm>
using namespace std;
int v[6002], w[6002], s[6002];
int f[6002];
int n, m;
int main()
{
    scanf("%d%d",&n,&m);
    for (int i = 1; i <= n; i++)
        scanf("%d%d%d",&v[i],&w[i],&s[i]);
    for (int i = 1; i <= n; i++)
       for (int j = m; j >= 0; j--)
          for (int k = 0; k <= s[i]; k++)
          {
               if (j-k*v[i]<0) break;
               f[j] = max(f[j],f[j-k*v[i]]+k*w[i]);
          }
    printf("%d\n",f[m]);
    return 0;
}
```



### [ä¸åŒçš„å­åºåˆ—](https://leetcode-cn.com/problems/distinct-subsequences/)

**é¢˜ç›®ï¼š**

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² S å’Œä¸€ä¸ªå­—ç¬¦ä¸² Tï¼Œè®¡ç®—åœ¨ S çš„å­åºåˆ—ä¸­ T å‡ºç°çš„ä¸ªæ•°ã€‚

ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€ä¸ªå­åºåˆ—æ˜¯æŒ‡ï¼Œé€šè¿‡åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰å­—ç¬¦ä¸”ä¸å¹²æ‰°å‰©ä½™å­—ç¬¦ç›¸å¯¹ä½ç½®æ‰€ç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚ï¼ˆä¾‹å¦‚ï¼Œ"ACE" æ˜¯ "ABCDE" çš„ä¸€ä¸ªå­åºåˆ—ï¼Œè€Œ "AEC" ä¸æ˜¯ï¼‰

ç¤ºä¾‹ 1:

```
è¾“å…¥: S = "rabbbit", T = "rabbit"
è¾“å‡º: 3
è§£é‡Š:

å¦‚ä¸‹å›¾æ‰€ç¤º, æœ‰ 3 ç§å¯ä»¥ä» S ä¸­å¾—åˆ° "rabbit" çš„æ–¹æ¡ˆã€‚
(ä¸Šç®­å¤´ç¬¦å· ^ è¡¨ç¤ºé€‰å–çš„å­—æ¯)

rabbbit
^^ ^^
rabbbit
^^ ^^
rabbbit
^ ^

```

**â€œå‡¡æ˜¯æ¶‰åŠåˆ°å­—ç¬¦ä¸²åŒ¹é…/å­ä¸²çš„é—®é¢˜éƒ½å¯ä»¥ç”¨å›æº¯æ³•æˆ–è€…åŠ¨æ€è§„åˆ’â€**

**â€œå›æº¯æ³•æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼ŒåŠ¨æ€è§„åˆ’ç”¨ç©ºé—´æ¢å–æ—¶é—´â€**

åŠ¨æ€è§„åˆ’å…³é”®æ˜¯æ‰¾åˆ°é€’æ¨å…¬å¼ï¼Œ è€Œæ‰¾åˆ°é€’æ¨å…¬å¼ï¼Œé¦–å…ˆå°±æ˜¯è¦æ‰¾åˆ°å¦‚ä½•è¡¨ç¤ºæ•°ç»„dp ç„¶åæ‰¾åˆ°é€’æ¨å…³ç³»ã€‚

å¯ä»¥å‘ç°ï¼Œæ­¤é¢˜å’Œç¼–è¾‘è·ç¦»ä¸€æ ·ã€‚éƒ½æ˜¯ç”±ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œ æ˜¯ä»ä¸€ä¸ªå­—ç¬¦ä¸²å˜åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ å¯¹äºç¼–è¾‘è·ç¦»è¿™ä¸ªé¢˜æ˜¯åœ¨å­—ç¬¦ä¸²1è¿›è¡Œå¢ï¼Œ åˆ ï¼Œ æ”¹æ“ä½œå˜åˆ°å­—ç¬¦ä¸²2ï¼Œ æ­¤é¢˜æ˜¯åœ¨å­—ç¬¦ä¸²1é‡Œæ‰¾åˆ°å­—ç¬¦ä¸²2ã€‚

æ‰€ä»¥å¯¹äºæ­¤é¢˜æˆ‘ä»¬å…ˆæ„é€ dpï¼Œ ç±»ä¼¼äºç¼–è¾‘è·ç¦»ï¼Œ å®šä¹‰`dp[i][j]`ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²1çš„ä»åˆå§‹ä½ç½®å¼€å§‹é•¿åº¦ä¸ºiçš„å­—ç¬¦ä¸²ï¼Œå³`T[0...i-1]`ï¼Œ åœ¨å­—ç¬¦ä¸²2çš„ä»åˆå§‹ä½å­å¼€å§‹é•¿åº¦ä¸ºjçš„å­—ç¬¦ä¸²ï¼ˆå³`S[0...j-1]`ï¼‰ ä¸­åŒ¹é…çš„ä¸ªæ•°ã€‚

å…³é”®å°±æ˜¯è¦æ‰¾é€’æ¨å¼

**â€œåŠ¨æ€è§„åˆ’å°±æ˜¯ç”¨è§„æ¨¡è¾ƒå°çš„å­é—®é¢˜'ç»„åˆã€æ¨å¹¿'å¾—åˆ°è§„æ¨¡è¾ƒå¤§çš„åŸå§‹é—®é¢˜â€**

å…ˆçœ‹å¯¹äºå½“å‰é—®é¢˜`dp[i][j]`ï¼Œæ¯”å½“å‰é—®é¢˜è§„æ¨¡å°çš„é—®é¢˜æœ‰ï¼š

`dp[i-1][j]`ï¼šè¡¨ç¤ºä¸²`T`çš„ä»åˆå§‹ä½ç½®å¼€å§‹é•¿åº¦ä¸º`i-1`çš„å­ä¸²ï¼Œ åœ¨ä¸²`S`çš„ä»åˆå§‹ä½ç½®å¼€å§‹é•¿åº¦ä¸º`j`çš„å­ä¸²ä¸­ä¸²åŒ¹é…çš„ä¸ªæ•°ã€‚å…¶å®å’Œå½“å‰é—®é¢˜æ²¡ä»€ä¹ˆå…³ç³»ã€‚

`dp[i-1][j-1]`ï¼šè¡¨ç¤ºä¸²`T`çš„ä»åˆå§‹ä½ç½®å¼€å§‹é•¿åº¦ä¸º`i-1`çš„å­ä¸²ï¼Œ åœ¨ä¸²`S`çš„ä»åˆå§‹ä½å­å¼€å§‹é•¿åº¦ä¸º`j-1`çš„å­ä¸²ä¸­åŒ¹é…çš„ä¸ªæ•°ã€‚

`dp[i][j-1]`ï¼šå­ä¸²`T[0...i]`åœ¨å­ä¸²`S[0...j-1]`é‡åŒ¹é…çš„ä¸ªæ•°

**ç¡®å®šå­é—®é¢˜**

å…ˆå›ºå®šç›®æ ‡ä¸²å­é—®é¢˜Tï¼Œè®¾å½“å‰é•¿åº¦ä¸º`i`ï¼Œå€™é€‰ä¸²Sï¼Œå½“å‰é•¿åº¦ä¸º`j`ï¼Œ

ç°åœ¨æ¥åˆ†æƒ…å†µè®¨è®º

å½“`T[i]ä¸S[j]ç›¸ç­‰`æ—¶

```
dp[i][j] = dp[i][j-1]+dp[i-1][j-1]
```

![](./pictures/20190626175619.png)

å½“`T[i]ä¸S[j]ä¸ç›¸ç­‰`æ—¶

```
dp[i][j] = dp[i][j-1]
```

æ‰¾åˆ°äº†é€’æ¨å¼å­

```c
dp[i][j] = dp[i][j-1] +  (s[i] == t[j]) ? dp[i-1][j-1] : 0
```

ä»£ç 

```c++
class Solution {
public:
    int numDistinct(string s, string t) {
        int m = t.length();
        int n = s.length();
        if(n<m) return 0;
        vector<vector<long>> dp(m+1,vector<long>(n+1,0));
        for(int i=0;i<=n;++i)
            dp[0][i] =1;
        for(int i=1;i<=m;++i)
        {
            for(int j=i;j<=n;++j)
            {
                if(t[i-1]!=s[j-1])
                    dp[i][j] = dp[i][j-1];
                else
                    dp[i][j] = dp[i-1][j-1]+dp[i][j-1];
            }
        }
        //show(dp);
        return dp[m][n];
    }
};
```

### [åˆ†å‰²å›æ–‡ä¸²II](https://leetcode-cn.com/problems/palindrome-partitioning-ii/)

**é¢˜ç›®**

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œå°† s åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯å›æ–‡ä¸²ã€‚

è¿”å›ç¬¦åˆè¦æ±‚çš„æœ€å°‘åˆ†å‰²æ¬¡æ•°ã€‚

```
ç¤ºä¾‹:
è¾“å…¥: "aab"
è¾“å‡º: 1
è§£é‡Š: è¿›è¡Œä¸€æ¬¡åˆ†å‰²å°±å¯å°† s åˆ†å‰²æˆ ["aa","b"] è¿™æ ·ä¸¤ä¸ªå›æ–‡å­ä¸²ã€‚
```

**æ€è·¯**

ä¹‹å‰è¿˜æœ‰ä¸€é¢˜ä¹Ÿæ˜¯å›æ–‡ä¸²ç›¸å…³é—®é¢˜[æœ€é•¿å›æ–‡å­ä¸²](https://leetcode-cn.com/problems/longest-palindromic-substring/) éƒ½å¾ˆéš¾ğŸ˜­

```c++
æœ¬é¢˜ä¸è¦æ±‚æ±‚å‡ºå…·ä½“åˆ†å‰²æ–¹æ¡ˆï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£ã€‚
å‡è®¾è¾“å…¥å­—ç¬¦ä¸²ä¸ºâ€™aabacâ€™:
|a |aã€€|bã€€|aã€€|cã€€|
0ã€€ï¼‘ã€€ ï¼’ã€€ï¼“ã€€ 4ã€€ 5
å¯ä»¥åˆ›å»ºä¸€ä¸ªæ•°ç»„resæ¥å­˜å‚¨æ¯ä¸ªä½ç½®çš„åˆå§‹æœ€å°åˆ†å‰²æ¬¡æ•°
ä¹Ÿå°±æ˜¯å½“å­—ç¬¦ä¸²ä¸­å®Œå…¨æ²¡æœ‰å›æ–‡ä¸²æ—¶çš„æœ€å¤§åˆ†å‰²æ¬¡æ•°ï¼Œå³[-1,0,1,2,3,4]ã€‚
ï¼ˆå¦‚ä½•è¿›ä¸€æ­¥æ›´æ–°æ¯ä¸ªä½ç½®éœ€è¦çš„åˆ†å‰²æ¬¡æ•°å‘¢ï¼Ÿï¼‰å¯ä»¥å…ˆæ¥ä¾æ¬¡éå†æ¯ä¸ªåˆ†å‰²ä½ï¼Œå®éªŒè§‚å¯Ÿä¸€ä¸‹resçš„å˜åŒ–ã€‚
åœ¨ä½ç½®0æ—¶ï¼Œä¸åšæ›´æ–°ã€‚
åœ¨ä½ç½®1æ—¶ï¼Œä¸åšæ›´æ–°ã€‚
åœ¨ä½ç½®2æ—¶ï¼Œå‘ç°â€™aaâ€™å¯ä»¥æ„æˆå›æ–‡ä¸²ï¼Œresæ›´æ–°ä¸º[-1,0,0,2,3,4]ã€‚
åœ¨ä½ç½®3æ—¶ï¼Œæœ€å°åˆ†å‰²ä¸ºâ€™aaâ€™å’Œâ€™bâ€™ï¼Œéœ€è¦ä¸€æ¬¡åˆ†å‰²ï¼Œresæ›´æ–°ä¸º[-1,0,0,1,3,4]ã€‚
åœ¨ä½ç½®4æ—¶ï¼Œæœ€å°åˆ†å‰²ä¸ºâ€™aâ€™å’Œâ€™abaâ€™ï¼Œéœ€è¦ä¸€æ¬¡åˆ†å‰²ï¼Œresæ›´æ–°ä¸º[-1,0,0,1,1,4]ã€‚
åœ¨ä½ç½®5æ—¶ï¼Œæœ€å°åˆ†å‰²ä¸ºâ€™aâ€™ï¼Œâ€˜abaâ€™å’Œâ€™câ€™ï¼Œéœ€è¦ä¸¤æ¬¡åˆ†å‰²ï¼Œresæ›´æ–°ä¸º[-1,0,0,1,1,2]ã€‚
å¯ä»¥å¾—å‡ºä¸€ä¸‹ç»“è®ºï¼Œå½“åœ¨åˆ†å‰²ä½iæ—¶ï¼Œè‹¥s[j:i]ä¸ºå›æ–‡ä¸²ï¼š
	é‚£ä¹ˆres[i]çš„åˆ†å‰²æ¬¡æ•°ä¸ºåœ¨åˆ†å‰²ä½jçš„æ¬¡æ•°res[j] + 1ã€‚
é¢˜ç›®è¦æ±‚æ˜¯æœ€å°‘çš„æ¬¡æ•°ï¼Œå› æ­¤jéå†0åˆ°i-1çš„æ‰€æœ‰ä½ç½®,æ±‚å‡ºres[i]çš„æœ€å°å€¼
æœ€ååªè¦è¿”å›res[-1]å°±æ˜¯æˆ‘ä»¬è¦çš„ç­”æ¡ˆã€‚

å¦å¤–å¦‚æœæ¯æ¬¡éƒ½åˆ¤æ–­s[j:i]æ˜¯å¦æ˜¯å›æ–‡ä¸²ä¼šæœ‰å¾ˆå¤šæ¬¡é‡å¤åˆ¤æ–­ï¼Œä»è€Œå¯¼è‡´è¶…æ—¶ã€‚
è§£å†³æ–¹æ³•æ˜¯ç©ºé—´æ¢æ—¶é—´ï¼Œåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„if_palindromeæ¥å­˜å‚¨æ‰€æœ‰å­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ä¸²ã€‚
è¿™ä¸ªäºŒç»´æ•°ç»„çš„èµ‹å€¼æ“ä½œå¯ä»¥åœ¨ä¸Šè¿°å¾ªç¯ä¸­åŒæ—¶è¿›è¡Œ
è‹¥s[j:i]é¦–å°¾ç›¸ç­‰ï¼Œä¸­é—´éƒ¨åˆ†ä¹Ÿæ˜¯å›æ–‡ä¸²æˆ–è€…s[j:i]çš„é•¿åº¦å°äºç­‰äº2(å³ä¸­é—´éƒ¨åˆ†ä¸ºç©º)
åˆ™s[j:i]ä¸ºå›æ–‡ä¸²ï¼Œif_palindromej = Trueã€‚
```

**ä»£ç **

```c++
class Solution {
public:
    int minCut(string s) {
        int n = s.length();
        vector<int> dp(n+1,INT_MAX);
        for(int i=0;i<=n;++i)
            dp[i] =i-1;
        vector<vector<bool>> circleStr(n,vector<bool>(n,true));
        for(int i=1;i<n;++i)
        {
            for(int j=i;j>=0;--j)
            {
                if(s[j]==s[i] &&( (i-j)<2 || circleStr[j+1][i-1]))
                    dp[i+1] = min(dp[j]+1,dp[i+1]);
                else
                {
                    circleStr[j][i] = false;
                }
            }
        }
        return dp[n];
    }
};
```



#### [å•è¯æ‹†åˆ†](https://leetcode-cn.com/problems/word-break/)

ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² s å’Œä¸€ä¸ªåŒ…å«éç©ºå•è¯åˆ—è¡¨çš„å­—å…¸ wordDictï¼Œåˆ¤å®š s æ˜¯å¦å¯ä»¥è¢«ç©ºæ ¼æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯ã€‚

è¯´æ˜ï¼š

æ‹†åˆ†æ—¶å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
ä½ å¯ä»¥å‡è®¾å­—å…¸ä¸­æ²¡æœ‰é‡å¤çš„å•è¯ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]
è¾“å‡º: true
è§£é‡Š: è¿”å› true å› ä¸º "leetcode" å¯ä»¥è¢«æ‹†åˆ†æˆ "leet code"ã€‚
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥: s = "applepenapple", wordDict = ["apple", "pen"]
è¾“å‡º: true
è§£é‡Š: è¿”å› true å› ä¸º "applepenapple" å¯ä»¥è¢«æ‹†åˆ†æˆ "apple pen apple"ã€‚
     æ³¨æ„ä½ å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
```
ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]
è¾“å‡º: false
```

**ï¼ˆä¸€ï¼‰æš´åŠ›å›æº¯æ³•**

0. åŸé—®é¢˜è€ƒè™‘s[0,:]èƒ½å¦ä»¥å­—å…¸ä¸­çš„å•è¯æ‹†åˆ†

1. å¯¹å­—ç¬¦ä¸²sä¸­å­ä¸²s[start..end]åˆ¤æ–­æ˜¯å¦åœ¨å­—å…¸ä¸­
  a.è‹¥å­ä¸²åœ¨ï¼Œåˆ™é€’å½’çš„è€ƒè™‘s[end+1,:]èƒ½å¦å•è¯æ‹†åˆ†
  b. è‹¥ä¸åœ¨ï¼Œåˆ™end=end+1ï¼Œå›åˆ°æ­¥éª¤(1)  ï¼ˆæ¨ªå‘æœç´¢ï¼‰

  c.å½“å‰èƒ½æ‹†åˆ†ä¸”ä¹‹åéƒ½èƒ½æ‹†åˆ†ï¼Œè¿”å›true

2. è¿”å›false

è¿™é‡Œæœä¸å…¶ç„¶è¶…æ—¶äº†ï¼Œå¯¹äºæœ€åæƒ…å†µ`s="aaaaaaaaÂ·Â·Â·aab"`å’Œ`wordDict={"a","aa","aaa",...}`è¿™æ ·çš„æƒ…å†µï¼Œæ¯ä¸€ä¸ªå‰ç¼€éƒ½åœ¨å­—å…¸ä¸­ï¼Œæ¯ä¸ªå­—æ¯å¯æœ€å¤šå›æº¯næ¬¡ï¼Œæ­¤æ—¶å›æº¯æ ‘çš„æ—¶é—´å¤æ‚åº¦ä¼šè¾¾åˆ° n^nï¼ˆnçš„næ¬¡æ–¹ï¼‰ ã€‚

**ï¼ˆäºŒï¼‰å¸¦å¤‡å¿˜å½•çš„å›æº¯æ³•**

åœ¨æš´åŠ›å›æº¯ä¸­å¯ä»¥çœ‹åˆ°è®¸å¤šå‡½æ•°è°ƒç”¨éƒ½æ˜¯å†—ä½™çš„ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°ä¼šå¯¹ç›¸åŒçš„å­—ç¬¦ä¸²è°ƒç”¨å¤šæ¬¡å›æº¯å‡½æ•°ã€‚

ä¾‹å­ï¼š

```c++
s="aaab"
dict={"a","aa","aaa","aaaa"}
```



<p align="center">
	<img src=./pictures/word_segment.png alt="Sample"  width="700">
	<p align="center">
		<em>å•è¯æ‹†åˆ†</em>
	</p>
</p>

**ç›¸åŒé¢œè‰²çš„åœ†åœˆæ¡†å‡ºæ¥çš„å°±æ˜¯å†—ä½™è°ƒç”¨**

ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®°å¿†åŒ–çš„æ–¹æ³•ï¼Œä½¿ç”¨ä¸€ä¸ªmemo æ•°ç»„ä¼šè¢«ç”¨æ¥ä¿å­˜å­é—®é¢˜çš„ç»“æœã€‚æ¯å½“è®¿é—®åˆ°å·²ç»è®¿é—®è¿‡çš„åç¼€ä¸²ï¼Œç›´æ¥ç”¨memo æ•°ç»„ä¸­çš„å€¼è¿”å›è€Œä¸éœ€è¦ç»§ç»­è°ƒç”¨å‡½æ•°ï¼Œmemo[i]è¡¨ç¤ºå­—ç¬¦ä¸²sä»ä¸‹æ ‡i è‡³ç»“æŸéƒ½å¯è¿›è¡Œå•è¯æ‹†åˆ†(true)æˆ–å¦ï¼ˆfalseï¼‰ã€‚

<p align="center">
	<img src=./pictures/word_segment1.png alt="Sample"  width="700">
	<p align="center">
		<em>å•è¯æ‹†åˆ†</em>
	</p>
</p>

```c++
class Solution {
public:
    bool wordBreak(string s, vector<string>& wordDict) {
        //9:31-9:46
        vector<int> memo(s.length(),-1);
        unordered_set<string> words(wordDict.begin(),wordDict.end());
        return helper(s,words,memo,0);
    }
    
    bool helper(const string &s,const unordered_set<string> &words,vector<int> &memo,int start)
    {
        if(start==s.length()) return true;
        if(memo[start]!=-1) return memo[start];
        for(int i=start;i<s.length();++i)
        {
            if(words.count(s.substr(start,i-start+1)) && helper(s,words,memo,i+1))
            {
                memo[start] = 1;
                return true;
            }
        }
        memo[start] =0;
        return false;
    }
};
```

**åˆ†æ**

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n^2)`ï¼Œæ¯æ¬¡å­—æ¯æœ€å¤šå›æº¯næ¬¡ä¸‹ï¼Œä½†è®¡ç®—è¿‡çš„å­æ ‘ä¸ä¼šåœ¨çœŸæ­£å›æº¯å¤šæ¬¡
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(n)` ã€‚å›æº¯æ ‘çš„æ·±åº¦å¯ä»¥è¾¾åˆ°` n `çº§åˆ«ã€‚

**ï¼ˆä¸‰ï¼‰åŠ¨æ€è§„åˆ’**

è½¬ç§»å…¬å¼ï¼š

![](./pictures/mylatex20190709_160812.png)

`dp[i]`è¡¨ç¤ºå­—ç¬¦ä¸²`s`è‡ª`å¼€å§‹`åˆ°ä¸‹æ ‡`i-1`çš„å­ä¸²èƒ½å¦è¢«å•è¯åˆ’åˆ†ï¼Œå®ƒç”±`dp[j]`å’Œå•è¯`word=s[j:i]`æ˜¯å¦åœ¨è¯å…¸ä¸­å…±åŒå†³å®šï¼Œåªè¦å­˜åœ¨è¿™æ ·çš„`j`ä½¿å¾—å³è¾¹çš„å¼å­ä¸ºçœŸï¼Œåˆ™`dp[i]`å°±ä¸ºçœŸã€‚

```c++
class Solution {
public:
    bool wordBreak(string s, vector<string>& wordDict) {
        vector<bool> dp(s.length()+1,false);
        unordered_set<string> words(wordDict.begin(),wordDict.end());
        //dp[i] è¡¨ç¤ºåˆ°s[0..i-1]çš„å­—ç¬¦ä¸²èƒ½è¢«å•è¯æ‹†åˆ†
        if(s.empty()) return true;
        dp[0] = true;
        for(int i=1;i<=s.length();++i)
            for(int j=0;j<i;j++)
            {
                dp[i] = dp[j] && words.count(s.substr(j,i-j));
                if(dp[i]) break;//å­˜åœ¨ä¸€æ¬¡ä¸ºçœŸå°±è·³å‡ºå†…éƒ¨å¾ªç¯
            }
        return dp[s.length()];
    }
};
```

**åˆ†æ**

+ æ—¶é—´å¤æ‚åº¦ï¼š`O(n^2)`ï¼Œä¸¤ä¸ªå¾ªç¯
+ ç©ºé—´å¤æ‚åº¦ï¼š`O(n)` ã€‚ä¸€ä¸ªæ•°ç»„

**ï¼ˆä¸‰ï¼‰ä»¿èƒŒåŒ…é—®é¢˜åŠ¨æ€è§„åˆ’**

å°†å­—å…¸ä¸­çš„å•è¯è§†ä¸ºç‰©å“

å­—ç¬¦ä¸²è§†ä¸ºèƒŒåŒ…ï¼ŒèƒŒåŒ…æ€»å®¹é‡æœ‰é™ï¼Œä¸”åªèƒ½æ”¾æŒ‡å®šç‰©å“ï¼Œä¸”ä¸€ç§ç‰©å“å¯ä»¥æ”¾å¤šä¸ª

```c++
class Solution {
public:
    bool wordBreak(string s, vector<string>& wordDict) {
        vector<bool> dp(s.length()+1,false);
        unordered_set<string> words(wordDict.begin(),wordDict.end());
        //dp[i] è¡¨ç¤ºåˆ°s[0..i-1]çš„å­—ç¬¦ä¸²èƒ½è¢«å•è¯æ‹†åˆ†
        if(s.empty()) return true;
        dp[0] = true;//ç©ºå­—ç¬¦è‚¯å®šç¬¦åˆè¦æ±‚
        for(int i=1;i<=s.length();++i)
            for(auto word:words)
            {
                if(i<word.length()) continue;//sä¸­èµ·å§‹ä½ç½®è‡³å°‘è¦æ¯”ä¸€ä¸ªå•è¯é•¿
                int pos= i-word.length();//è®¡ç®—èµ·å§‹ä½ç½®
                dp[i] = dp[pos] && word==s.substr(pos,word.length());//ä»å­—å…¸ä¸­å–ä¸€ä¸ªå•è¯ï¼Œçœ‹èƒ½å¦æ”¾è¿›ä¸²sçš„å¯¹åº”ä½ç½®
                if(dp[i]) break;
            }
        return dp[s.length()];
    }
};
```





